<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>后台管理 - 假新闻检测系统</title>
    <link rel="icon" href="/ico/Detect.ico">
    <link rel="stylesheet" href="/client-src/css/variables.css">
    <link rel="stylesheet" href="/client-src/css/common.css">
    <link rel="stylesheet" href="/client-src/css/admin.css">
    <script type="module" src="/client-src/js/theme-loader.js"></script>
    <script type="module" src="/client-src/js/admin.js"></script>
</head><body>
    <div class="admin-layout">
        <!-- 侧边栏遮罩面罩 (窄屏模式) -->
        <div id="sidebar-overlay" class="sidebar-overlay"></div>
        
        <!-- 左侧边栏 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <svg class="sidebar-logo" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    <path d="M12 8v4"></path>
                    <path d="M12 16h.01"></path>
                </svg>
                <h1 class="sidebar-title">后台管理</h1>
                <button class="sidebar-toggle-btn" id="sidebar-toggle" title="收起/展开">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-group">
                    <div class="nav-group-title">仪表盘</div>
                    <div id="tab-workbench" class="nav-item active">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                        <span>工作台</span>
                    </div>
                    <div id="tab-users" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        <span>用户管理</span>
                    </div>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">内容监控</div>
                    <div id="tab-history" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span>历史记录</span>
                    </div>
                    <div id="tab-anomalies" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                        <span>采集异常日志</span>
                    </div>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">安全中心</div>
                    <div id="tab-ip-logs" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                        <span>IP 访问日志</span>
                    </div>
                    <div id="tab-blacklist" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line></svg>
                        <span>IP 黑名单</span>
                    </div>
                    <div id="tab-crawler-defense" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="M12 8v4"></path><path d="M12 16h.01"></path></svg>
                        <span>防火墙</span>
                    </div>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">系统运维</div>
                    <div id="tab-system" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path></svg>
                        <span>资源管理</span>
                    </div>
                    <div id="tab-config" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                        <span>API 配置</span>
                    </div>
                </div>

                <div class="nav-group">
                    <div class="nav-group-title">界面定制</div>
                    <div id="tab-appearance" class="nav-item">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path></svg>
                        <span>外观设置</span>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <header class="top-header">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <button id="mobile-menu-toggle" class="icon-btn mobile-menu-toggle" title="显示菜单">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    </button>
                    <div class="breadcrumb">
                        <span id="breadcrumb-parent">仪表盘</span> / <span id="current-tab-title">工作台</span>
                    </div>
                    <button id="refresh-btn" class="icon-btn" title="刷新数据" style="margin-left: -8px;">
                        <svg width="22" height="22" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 4.5a7.5 7.5 0 1 0 7.419 6.392c-.067-.454.265-.892.724-.892.37 0 .696.256.752.623A9 9 0 1 1 18 5.292V4.25a.75.75 0 0 1 1.5 0v3a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1 0-1.5h1.35a7.474 7.474 0 0 0-5.1-2Z" fill="currentColor"/></svg>
                    </button>
                </div>

                <div class="header-actions">
                    <button id="back-to-home" class="icon-btn" title="返回前台主页">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    </button>

                    <button class="icon-btn" title="消息中心">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                    </button>

                    <button class="icon-btn" title="切换深色模式" id="theme-toggle">
                        <svg id="sun-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="display:none;"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                        <svg id="moon-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    </button>
                    
                    <div style="width: 1px; height: 18px; background: var(--border-color); margin: 0 4px;"></div>
                    
                    <div class="user-menu-container">
                        <div id="user-profile" class="user-profile">
                            <img id="user-avatar" src="/api/public/avatar/0" style="width: 32px; height: 32px; border-radius: 50%; background: var(--border-color); object-fit: cover;">
                            <div style="display: flex; flex-direction: column; line-height: 1.2;">
                                <span style="font-size: 13px; font-weight: 600;" id="user-display-name">Admin</span>
                            </div>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                        <div id="user-dropdown" class="user-dropdown">
                            <div id="edit-self-btn" class="dropdown-item">
                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                                修改个人信息
                            </div>
                            <div class="dropdown-divider"></div>
                            <div id="logout-btn" class="dropdown-item danger">
                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                                退出登录
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="content-wrapper">
                <div class="header-info" id="admin-info">
                    正在加载管理员信息...
                </div>

                <!-- 工作台区块 (Dashboard) -->
                <div id="workbench-section">
                    <div class="stats-grid">
                        <!-- 第一行 -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">总注册用户</span>
                                <div class="stat-icon" style="background: var(--accent-light); color: var(--primary-color)">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                                </div>
                            </div>
                            <div class="stat-value" id="stat-total-users">-</div>
                            <div class="stat-footer">
                                <span class="stat-trend" id="stat-total-users-trend">全量用户</span>
                                <span class="stat-desc">用户数</span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">今日成功登录</span>
                                <div class="stat-icon" style="background: var(--success-light); color: var(--success-color)">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><polyline points="16 11 18 13 22 9"></polyline></svg>
                                </div>
                            </div>
                            <div class="stat-value" id="stat-login-users-count">0</div>
                            <div class="stat-footer">
                                <span class="stat-trend" id="stat-login-trend">今日通过身份验证</span>
                                <span class="stat-desc">次数</span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">今日访问 IP 数</span>
                                <div class="stat-icon" style="background: var(--secondary-light); color: var(--secondary-color)">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle></svg>
                                </div>
                            </div>
                            <div class="stat-value" id="stat-today-visitors">-</div>
                            <div class="stat-footer">
                                <span class="stat-trend" id="stat-visitor-trend">已去重 (未拦截)</span>
                                <span class="stat-desc">访问网站的设备数</span>
                            </div>
                        </div>

                        <!-- 第二行 -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">采集异常</span>
                                <div class="stat-icon" style="background: var(--warning-light); color: var(--warning-color)">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path></svg>
                                </div>
                            </div>
                            <div class="stat-value" id="stat-anomaly-count">0</div>
                            <div class="stat-footer">
                                <span class="stat-trend" id="stat-anomaly-trend">采集过程触发异常</span>
                                <span class="stat-desc">日志</span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">防火墙拦截</span>
                                <div class="stat-icon" style="background: var(--danger-light); color: var(--danger-color)">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="M12 8v4"></path><path d="M12 16h.01"></path></svg>
                                </div>
                            </div>
                            <div class="stat-value" id="stat-blocked-count">0</div>
                            <div class="stat-footer">
                                <span class="stat-trend" id="stat-blocked-trend">拦截恶意爬虫</span>
                                <span class="stat-desc">次数</span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">密码错误次数</span>
                                <div class="stat-icon" style="background: var(--danger-light); color: var(--danger-color)">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                                </div>
                            </div>
                            <div class="stat-value" id="stat-login-fail-count">0</div>
                            <div class="stat-footer">
                                <span class="stat-trend" id="stat-login-fail-trend">登录尝试失败</span>
                                <span class="stat-desc">今日累计</span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">系统存储压力</span>
                                <div class="stat-icon" style="background: var(--warning-light); color: var(--warning-color)">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path></svg>
                                </div>
                            </div>
                            <div class="stat-value" id="stat-disk-usage">- %</div>
                            <div class="mem-usage-container">
                                <div class="mem-info-text">
                                    <span>已使用 <span id="stat-disk-used">0 GB</span></span>
                                    <span id="stat-disk-total">0 GB</span>
                                </div>
                                <div class="progress-bar-bg">
                                    <div id="stat-disk-progress" class="progress-bar-fill"></div>
                                </div>
                            </div>
                        </div>

                        <!-- 实时系统负载 -->
                        <div class="stat-card" style="padding: 12px 15px; min-height: 100px; display: flex; flex-direction: column;">
                            <div class="stat-header" style="margin-bottom: 5px;">
                                <span class="stat-title">CPU 使用率</span>
                                <div class="stat-icon" style="background: var(--accent-light); color: var(--primary-color);">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="15" x2="23" y2="15"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="15" x2="4" y2="15"></line></svg>
                                </div>
                            </div>
                            
                            <div style="display: flex; align-items: center; justify-content: space-between; flex: 1;">
                                <div class="cpu-usage-circle" style="width: 85px; height: 85px; flex-shrink: 0;">
                                    <svg viewBox="0 0 36 36" class="circular-chart" style="width: 100%; height: 100%;">
                                        <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                                        <path id="cpu-circle-path" class="circle" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" style="stroke: var(--primary-color);"/>
                                        <text id="stat-cpu-usage" x="18" y="20.35" class="percentage">0 %</text>
                                    </svg>
                                </div>

                                <div style="min-width: 0; text-align: right;">
                                    <div style="font-size: 11px; color: var(--text-muted); font-weight: 500; white-space: nowrap;">实时核心负载</div>
                                </div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">内存占用率</span>
                                <div class="stat-icon" style="background: var(--success-light); color: var(--success-color)">
                                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>
                                </div>
                            </div>
                            <div class="stat-value" id="stat-mem-usage">- %</div>
                            <div class="mem-usage-container">
                                <div class="mem-info-text">
                                    <span>已使用 <span id="mem-used-val">0 GB</span></span>
                                    <span id="mem-total-val">0 GB</span>
                                </div>
                                <div class="progress-bar-bg">
                                    <div id="mem-progress-fill" class="progress-bar-fill"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="users-section" class="lazy-section">
                    <template>
            <div class="section-header">
                <h2>用户列表</h2>
                <button id="add-user-btn" class="filled-btn" style="height: 40px; display: flex; align-items: center; justify-content: center;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 4px;"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    新增用户
                </button>
            </div>
            <div class="table-container">
                <table id="users-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>用户名</th>
                            <th>角色</th>
                            <th>在线状态</th>
                            <th>上次登录IP</th>
                            <th>上次登录时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="users-pagination" class="pagination-container"></div>
            </div>
                    </template>
        </div>

        <!-- 历史记录区块 -->
        <div id="history-section" style="display:none;" class="lazy-section">
            <template>
            <div class="section-header">
                <h2>所有用户历史记录</h2>
                <div class="section-actions">
                    <button id="refresh-history-btn" class="icon-btn primary" style="width: 40px; height: 40px;" title="刷新记录">
                        <svg width="22" height="22" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 4.5a7.5 7.5 0 1 0 7.419 6.392c-.067-.454.265-.892.724-.892.37 0 .696.256.752.623A9 9 0 1 1 18 5.292V4.25a.75.75 0 0 1 1.5 0v3a.75.75 0 0 1-.75.75h-3a.75.75 0 0 1 0-1.5h1.35a7.474 7.474 0 0 0-5.1-2Z" fill="currentColor"/></svg>
                    </button>
                    <div class="search-group">
                        <div class="search-wrapper">
                            <input type="text" id="history-search" placeholder="搜索标题或内容..." style="width: 250px;" >
                            <span id="clear-history-search" class="clear-icon">&times;</span>
                        </div>
                        <button id="search-history-btn" class="search-btn" title="搜索">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="8"></circle><line x1="22" y1="22" x2="17.65" y2="17.65"></line></svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="table-container">
                <table id="history-table">
                    <thead>
                        <tr>
                            <th>用户</th>
                            <th>标题 </th>
                            <th>链接 / 原始输入</th>
                            <th>评分</th>
                            <th>时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="history-pagination" class="pagination-container"></div>
            </div>
            </template>
        </div>

        <!-- 资源管理区块 -->
        <div id="system-section" style="display:none;" class="lazy-section">
            <template>
            <h2>资源管理</h2>
            <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:20px; margin-top:20px;">
                <!-- 图片缓存 -->
                <div style="background:var(--bg-secondary); padding:25px; border-radius:12px; border:1px solid var(--border-color);">
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:15px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--primary-color)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                        <h3 style="margin:0;">图片缓存</h3>
                    </div>
                    <p style="color:var(--text-muted); font-size:14px; margin-bottom:20px;">系统代理的图片文件缓存，用于加速历史记录查看和绕过反爬限制。</p>
                    <div style="display:flex; justify-content:space-between; align-items:flex-end;">
                        <div>
                            <div style="font-size:24px; font-weight:bold; color:var(--text-main);" id="cache-size">Loading...</div>
                            <div style="font-size:14px; color:var(--text-muted);" id="cache-count">Loading...</div>
                        </div>
                        <button id="clear-cache-btn" class="filled-btn" style="background:var(--danger-color)">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                            清除缓存
                        </button>
                    </div>
                </div>

                <!-- 系统空间 -->
                <div style="background:var( --bg-secondary); padding:25px; border-radius:12px; border:1px solid var(--border-color);">
                    <div style="display:flex; align-items:center; gap:10px; margin-bottom:15px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--success-color)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                        <h3 style="margin:0;">系统存储空间</h3>
                    </div>
                    <p style="color:var(--text-muted); font-size:14px; margin-bottom:20px;">服务器磁盘根目录的可用空间概况。</p>
                    <div style="display:flex; justify-content:space-between; align-items:flex-end;">
                        <div>
                            <div style="font-size:14px; color:var(--text-muted); margin-bottom:4px;">
                                可用空间：<strong id="disk-free" style="color:var(--text-main); font-size:20px;">Loading...</strong>
                            </div>
                            <div style="font-size:13px; color:var(--text-muted);" id="disk-total">Loading...</div>
                        </div>
                        <div id="disk-percent" style="font-size: 11px; color: var(--success-color); font-weight: bold; background: var(--success-light); padding: 4px 10px; border-radius: 99px; border: 1px solid var(--success-light);"> - % 已用 </div>
                    </div>
                    <!-- 简单的进度条 -->
                    <div style="width:100%; height:8px; background:var(--divider-color); border-radius:4px; margin-top:15px; overflow:hidden;">
                        <div id="disk-bar" style="width:0%; height:100%; background:var(--primary-color); transition: width 0.5s;"></div>
                    </div>
                </div>
            </div>
            </template>
        </div>

        <!-- IP 访问日志区块 -->
        <div id="ip-logs-section" style="display:none;" class="lazy-section">
            <template>
            <div class="section-header">
                <h2>IP 访问日志</h2>
                <button id="clear-ip-logs-btn" class="filled-btn secondary">清空记录</button>
            </div>
            
            <div style="margin-top:20px;">
                <h3>今日IP访问数</h3>
                <div class="table-container">
                    <table id="ip-today-table">
                        <thead>
                            <tr>
                                <th>IP 地址</th>
                                <th>地理位置</th>
                                <th>今日访问次数</th>
                                <th>最后访问时间</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div id="ip-today-pagination" class="pagination-container"></div>
                </div>
            </div>

            <div style="margin-top:30px;">
                <div class="section-header" style="margin-bottom:15px;">
                    <h3 style="margin:0;">历史访问记录 (去重 IP+UA)</h3>
                    <div class="search-group">
                        <div class="search-wrapper">
                            <input type="text" id="ip-history-search" placeholder="搜索 IP 或 地理位置..." style="width: 220px;" >
                            <span id="clear-ip-search" class="clear-icon">&times;</span>
                        </div>
                        <button id="search-ip-btn" class="search-btn" title="搜索">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="8"></circle><line x1="22" y1="22" x2="17.65" y2="17.65"></line></svg>
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="ip-history-table">
                        <thead>
                            <tr>
                                <th>IP 地址</th>
                                <th>地理位置</th>
                                <th>浏览器标识 (User-Agent)</th>
                                <th>最后访问时间</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <div id="ip-logs-pagination" class="pagination-container"></div>
                </div>
            </div>
            </template>
        </div>

        <!-- IP 黑名单区块 -->
        <div id="blacklist-section" style="display:none;" class="lazy-section">
            <template>
            <div class="section-header">
                <h2>IP 黑名单管理</h2>
                <button id="add-blacklist-ip-btn" class="filled-btn">+ 新增封禁 IP</button>
            </div>
            <div class="table-container">
                <table id="blacklist-table">
                    <thead>
                        <tr>
                            <th>IP 地址</th>
                            <th>封禁原因</th>
                            <th>封禁时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="blacklist-pagination" class="pagination-container"></div>
            </div>
            </template>
        </div>

        <!-- 异常日志区块 -->
        <div id="anomalies-section" style="display:none;" class="lazy-section">
            <template>
            <div class="section-header">
                <h2>抓取异常记录 (可能已被拦截)</h2>
                <button id="clear-anomalies-btn" class="filled-btn secondary">清空记录</button>
            </div>
            <div class="table-container">
                <table id="anomalies-table">
                    <thead>
                        <tr>
                            <th>检测时间</th>
                            <th>触发关键词</th>
                            <th>页面标题</th>
                            <th>原始链接</th>
                            <th>管理操作</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="anomalies-pagination" class="pagination-container"></div>
            </div>
            </template>
        </div>

        <!-- 防火墙区块 -->
        <div id="crawler-defense-section" style="display:none;" class="lazy-section">
            <template>
            <div class="section-card" style="margin-bottom: 25px;">
                <h2 class="card-title">爬虫防御设置</h2>
                <div style="background: var(--bg-card); padding: 25px; border-radius: 12px; border: 1px solid var(--border-color);">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                        <div class="form-group">
                            <label for="crawler-ua-min">User-Agent 最小长度限制</label>
                            <input type="number" id="crawler-ua-min" value="10" min="0" max="1000" placeholder="访问请求 UA 长度小于此值时拦截">
                            <p style="font-size: 12px; color: var(--text-muted); margin-top: 5px;">建议设为 10-20。通常真实浏览器的 UA 长度都在 100 以上。</p>
                        </div>
                        <div class="form-group">
                            <label for="crawler-ua-keywords">UA 拦截关键词 (英文逗号分隔)</label>
                            <textarea id="crawler-ua-keywords" style="height:100px; font-family:inherit; resize:vertical; padding: 12px;" placeholder="python,scrapy,spider,bot..."></textarea>
                            <p style="font-size: 12px; color: var(--text-muted); margin-top: 5px;">匹配不区分大小写。当 UA 包含任意关键词时将被拦截。</p>
                        </div>
                    </div>
                    <div style="margin-top: 20px; text-align: right;">
                        <button id="save-crawler-settings-btn" class="icon-btn primary" style="width: 40px; height: 40px;" title="保存防御配置">
                            <svg width="22" height="22" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.75A2.75 2.75 0 0 1 5.75 3h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM5.75 4.5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25A2.25 2.25 0 0 1 8.25 12h7.5A2.25 2.25 0 0 1 18 14.25v5.25h.25c.69 0 1.25-.56 1.25-1.25V8.286c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.25a2.25 2.25 0 0 1-2.25 2.25h-4.5A2.25 2.25 0 0 1 7 7.25V4.5H5.75Zm10.75 15v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75v5.25h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V4.5h-6Z" fill="currentColor"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="section-header">
                <h2>全局拦截日志 (爬虫/黑名单)</h2>
                <div class="section-actions">
                    <button id="clear-crawler-logs-btn" class="filled-btn danger" style="height: 40px;">清空记录</button>
                    <div class="search-group">
                        <div class="search-wrapper">
                            <input type="text" id="crawler-log-search" placeholder="搜索 IP/地区/UA..." style="width: 220px;" >
                            <span id="clear-crawler-search" class="clear-icon">&times;</span>
                        </div>
                        <button id="search-crawler-btn" class="search-btn" title="搜索">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="8"></circle><line x1="22" y1="22" x2="17.65" y2="17.65"></line></svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <table id="crawler-logs-table">
                    <thead>
                        <tr>
                            <th>来源 IP</th>
                            <th>地理位置</th>
                            <th>最后拦截时间</th>
                            <th>拦截原因</th>
                            <th>拦截次数</th>
                            <th>User-Agent</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="crawler-logs-pagination" class="pagination-container"></div>
            </div>
            </template>
        </div>

        <!-- API 配置区块 -->
        <div id="config-section" style="display:none;" class="lazy-section">
            <template>
            <h2>API 接口配置</h2>
            <div class="config-panel">
                <h3 class="config-section-title">模型 API (OpenAI/Curl)</h3>
                
                <div class="method-tabs-container">
                    <div class="method-tabs">
                        <div class="method-slider" id="method-slider"></div>
                        <button type="button" class="method-tab active" id="tab-sdk">OpenAI SDK</button>
                        <button type="button" class="method-tab" id="tab-curl">Curl API</button>
                    </div>
                    <input type="hidden" id="config-llm-method" value="sdk">
                </div>

                <div class="config-form-grid">
                    <div class="form-group">
                        <label for="config-llm-key">API Key</label>
                        <input type="password" id="config-llm-key" placeholder="输入 API Key" style="width:100%;">
                    </div>
                    <div class="form-group">
                        <label for="config-llm-url">Base URL</label>
                        <input type="text" id="config-llm-url" placeholder="https://ark.cn-beijing.volces.com/api/v3" style="width:100%;">
                    </div>
                    <div class="form-group">
                        <label for="config-llm-model">模型名称 (Model Endpoint)</label>
                        <input type="text" id="config-llm-model" placeholder="ep-xxxxxxxxxxxx" style="width:100%;">
                    </div>
                    
                    <!-- 深度思考 Switch -->
                    <div class="switch-group">
                        <div class="switch-info">
                            <label for="config-llm-thinking">开启深度思考 (Beta)</label>
                            <span>启用后将向模型发送 thinking 参数以支持推理链</span>
                        </div>
                        <label class="ui-switch">
                            <input type="checkbox" id="config-llm-thinking">
                            <span class="ui-slider"></span>
                        </label>
                    </div>
                </div>

                <h3 class="config-section-title success" style="margin-top:35px;">联网搜索 API (Bocha)</h3>
                <div class="config-form-grid" style="margin-top:20px;">
                    <div class="form-group">
                        <label for="config-search-key">Bocha API Key</label>
                        <input type="password" id="config-search-key" placeholder="输入 Bocha API Key" style="width:100%;">
                    </div>
                    <div class="form-group">
                        <label for="config-search-url">搜索 API Base URL</label>
                        <input type="text" id="config-search-url" placeholder="https://api.bochaai.com/v1/web-search" style="width:100%;">
                    </div>
                </div>

                <div class="form-actions">
                    <span id="save-status" class="save-status-text">已保存生效 ✓</span>
                    <button class="filled-btn btn-config-save" id="save-config-btn">
                        保存配置
                    </button>
                </div>
            </div>
            
            <div class="config-tips">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <div>
                    提示: API 配置保存在服务器 <code>data/config.json</code> 中。保存后将立即应用于新发起的检测任务。<br>
                    注意: 联网搜索目前仅支持 Bocha 接口。
                </div>
            </div>
            </template>
        </div>
        <!-- 外观设置区块 -->
        <div id="appearance-section" style="display:none;" class="lazy-section">
            <template>
            <h2>外观设置</h2>
            <div style="background:var(--bg-card); padding:30px; border-radius:12px; border:1px solid var(--border-color); margin-top:20px;">
                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:30px;">
                    <!-- 浅色模式设置 -->
                    <div style="background: var(--bg-secondary); padding: 20px; border-radius: 12px; border: 1px dashed var(--border-color);">
                        <h3 style="margin-top:0; border-left: 4px solid var(--primary-color); padding-left: 10px; margin-bottom: 20px;">浅色模式 (Light Mode)</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="light-primary">主题主色 (Primary)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-primary" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-primary-text" placeholder="#4361ee" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="light-secondary">主题次色 (Secondary)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-secondary" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-secondary-text" placeholder="#3f37c9" style="flex:1;">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="light-bg">主页面背景 (Main Background)</label>
                            <div style="display:flex; gap:10px; align-items:center;">
                                <input type="color" id="light-bg" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                <input type="text" id="light-bg-text" placeholder="#f3f4f6" style="flex:1;">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="light-bg-sec">容器次级背景 (Secondary BG)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-bg-sec" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-bg-sec-text" placeholder="#f8f9fa" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="light-card">卡片容器背景 (Card BG)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-card" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-card-text" placeholder="#ffffff" style="flex:1;">
                                </div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="light-bg-tertiary">三级背景 (Tertiary BG)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-bg-tertiary" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-bg-tertiary-text" placeholder="#f1f3f5" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="light-bg-menu">菜单/下拉背景 (Menu BG)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-bg-menu" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-bg-menu-text" placeholder="rgba(255, 255, 255, 0.95)" style="flex:1;">
                                </div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="light-border">标准容器边框 (Border)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-border" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-border-text" placeholder="#e9ecef" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="light-glass-border">毛玻璃容器边框 (Glass)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-glass-border" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-glass-border-text" placeholder="rgba(255, 255, 255, 0.8)" style="flex:1;">
                                </div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="light-text-main">正文文本颜色 (Text Main)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-text-main" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-text-main-text" placeholder="#111827" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="light-text-muted">次要文本颜色 (Text Muted)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="light-text-muted" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="light-text-muted-text" placeholder="#6b7280" style="flex:1;">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 深色模式设置 -->
                    <div style="background: var(--bg-secondary); padding: 20px; border-radius: 12px; border: 1px dashed var(--border-color);">
                        <h3 style="margin-top:0; border-left: 4px solid var(--primary-color); padding-left: 10px; margin-bottom: 20px;">深色模式 (Dark Mode)</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="dark-primary">主题主色 (Primary)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-primary" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-primary-text" placeholder="#4cc9f0" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="dark-secondary">主题次色 (Secondary)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-secondary" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-secondary-text" placeholder="#4895ef" style="flex:1;">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="dark-bg">主页面背景 (Main Background)</label>
                            <div style="display:flex; gap:10px; align-items:center;">
                                <input type="color" id="dark-bg" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                <input type="text" id="dark-bg-text" placeholder="#0f172a" style="flex:1;">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="dark-bg-sec">容器次级背景 (Secondary BG)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-bg-sec" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-bg-sec-text" placeholder="#1a1d20" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="dark-card">卡片容器背景 (Card BG)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-card" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-card-text" placeholder="#1e293b" style="flex:1;">
                                </div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="dark-bg-tertiary">三级背景 (Tertiary BG)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-bg-tertiary" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-bg-tertiary-text" placeholder="#212529" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="dark-bg-menu">菜单/下拉背景 (Menu BG)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-bg-menu" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-bg-menu-text" placeholder="rgba(25, 25, 26, 0.95)" style="flex:1;">
                                </div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="dark-border">标准容器边框 (Border)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-border" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-border-text" placeholder="#343333" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="dark-glass-border">毛玻璃容器边框 (Glass)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-glass-border" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-glass-border-text" placeholder="rgba(255, 255, 255, 0.15)" style="flex:1;">
                                </div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="dark-text-main">正文文本颜色 (Text Main)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-text-main" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-text-main-text" placeholder="#f8fafc" style="flex:1;">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="dark-text-muted">次要文本颜色 (Text Muted)</label>
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <input type="color" id="dark-text-muted" style="width:40px; height:38px; padding:2px; border:none; cursor:pointer; background:none;">
                                    <input type="text" id="dark-text-muted-text" placeholder="#94a3b8" style="flex:1;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="margin-top:30px;">
                    <h3 style="margin-top:0; border-left: 4px solid var(--success-color); padding-left: 10px; margin-bottom: 20px;">快速预设 (Presets)</h3>
                    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap:12px;" id="theme-presets">
                        <p style="color:var(--text-muted); font-size:14px;">正在加载预设...</p>
                    </div>
                </div>

                <div style="margin-top:40px; display:flex; gap:15px; justify-content: flex-end;">
                    <button id="reset-theme-btn" class="filled-btn secondary">恢复默认</button>
                    <button id="save-theme-btn" class="filled-btn" style="height: 40px; padding: 0 20px;">应用并保存</button>
                </div>
            </div>
            </template>
        </div>
            </div> <!-- end content-wrapper -->
        </main>
    </div> <!-- end admin-layout -->

    <!-- Blacklist Add Modal -->
    <div id="blacklist-modal" class="modal">
        <div class="modal-content">
            <h3>手动封禁 IP</h3>
            <div class="form-group">
                <label for="blacklist-ip">IP 地址</label>
                <input type="text" id="blacklist-ip" placeholder="e.g. 192.168.1.1">
            </div>
            <div class="form-group">
                <label for="blacklist-reason">封禁原因 (可选)</label>
                <input type="text" id="blacklist-reason" placeholder="e.g. 恶意扫描">
            </div>
            <div class="modal-actions">
                <button class="filled-btn secondary close-modal-btn">取消</button>
                <button id="confirm-blacklist-btn" class="filled-btn danger">确认封禁</button>
            </div>
        </div>
    </div>

    <!-- Add Modal -->
    <div id="add-modal" class="modal">
        <div class="modal-content">
            <h3>新增用户</h3>
            <div class="form-group">
                <label for="add-username">用户名</label>
                <input type="text" id="add-username" placeholder="请输入用户名" minlength="3" maxlength="20">
            </div>
            <div class="form-group">
                <label for="add-password">密码</label>
                <input type="password" id="add-password" placeholder="请输入密码" minlength="6" maxlength="32">
            </div>
            <div class="form-group">
                <label for="add-role">角色</label>
                <select id="add-role">
                    <option value="user">普通用户</option>
                    <option value="admin">管理员</option>
                </select>
            </div>
            <div class="form-group">
                <label for="add-status">状态</label>
                <select id="add-status">
                    <option value="active">正常</option>
                    <option value="pending">待审核</option>
                </select>
            </div>
            <div class="modal-actions">
                <button class="filled-btn secondary close-modal-btn">取消</button>
                <button id="confirm-create-user-btn" class="filled-btn">创建用户</button>
            </div>
        </div>
    </div>

</body>
</html>
